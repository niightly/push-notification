# IBM Push Notification (Android Only)

This module will allow you to send push notification to Android devices without depending from other stuff.

## Prerequisite
Since this module uses features available after Node7, it is required of the module usage, so we decide to put the version used to build this module as starter:

* Node 7.10.0 or higher;

### Dependencies

Since this module communicate with other server it will install the module below:

* ![request@2.81.0](https://github.com/request/request)

## Installation

```npm install ibm-push-notification```

## Parameters

#### Initialization
Here follow the params used on the client initialization

| Property   | Type    | Required         | Description
| ---------- | ------- | ---------------- | -----------
| key        | String  | True | The key generated by the google for push notification features.

#### Notification
here follow the params used on the notification

| Property     | Type          | Required         | Description
| ------------ | ------------- | ---------------- | -----------
| notification | String/Object | True             | Message to be send on the push notification, can be just a string or if you want to set a title, you can use an object `{ title: 'Foo', body: 'Bar' }`.
| priority     | Number        | False            | Use `5` for Normal priority and `10` for high priority. If omitted, will be 5 by default.
| expiration   | Number        | False | A timestamp to define the expiration of the message (after that apple will stop to try to send the push
| to           | String/Array  | True             | The Device(s) that will receive the notification

## Usage
Here is an example for iOS usage only

#### Create the client
Below you can see several different ways to create your push client

```javascript
const PushNotification = require('ibm-push-notification')({
    key: 'here-goes-your-google-client-key'
}, 'android')
```

### Send the Push Notification
After create the client for the push notification, you can send it anytime following the examples below:

#### One device only
Here is an example about how to send the notification to one device only

###### Only Mandatory Params
```javascript
const PushNotification = require('ibm-push-notification')({
    key: 'here-goes-your-google-client-key'
}, 'android')

async function sendNotification(message) {
    try {    
        return await PushNotification.send({
            notification: message,
            to: <DEVICE_ID>  
        })
    } catch (err) {
        throw err
    }
}
```

###### Custom Properties
```javascript
const PushNotification = require('ibm-push-notification')({
    key: 'here-goes-your-google-client-key'
}, 'android')

async function sendNotification(message) {
    try {    
        return await PushNotification.send({
            notification: { title: "Foo", body: "Bar" },
            priority: 5,
            expiration: 0,
            to: <DEVICE_ID>
        })
    } catch (err) {
        throw err
    }
}
```

#### Multiple devices
Here is an example about how to send the notification to multiple devices (same message)

###### Only Mandatory Params
```javascript
const PushNotification = require('ibm-push-notification')({
    key: 'here-goes-your-google-client-key'
}, 'android')

async function sendNotification(message) {
    try {    
        return await PushNotification.send({
            notification: message,
            to: [<DEVICE_ID_1>, <DEVICE_ID_2>]
        })
    } catch (err) {
        throw err
    }
}
```

###### Custom Properties
```javascript
const PushNotification = require('ibm-push-notification')({
    key: 'here-goes-your-google-client-key'
}, 'android')

async function sendNotification(message) {
    try {    
        return await PushNotification.send({
            notification: { title: "Foo", body: "Bar" },
            priority: 5,
            expiration: 0,
            to: [<DEVICE_ID_1>, <DEVICE_ID_2>]
        })
    } catch (err) {
        throw err
    }
}
```